/*! For license information please see 212.ee2a4db7.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkponke_clicker=self.webpackChunkponke_clicker||[]).push([[212],{956:(e,t,n)=>{var r=n(43);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,s=r.useEffect,i=r.useLayoutEffect,c=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return i((function(){o.value=n,o.getSnapshot=t,l(o)&&u({inst:o})}),[e,n,t]),s((function(){return l(o)&&u({inst:o}),e((function(){l(o)&&u({inst:o})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},39:(e,t,n)=>{var r=n(43),o=n(461);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=o.useSyncExternalStore,i=r.useRef,c=r.useEffect,l=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var f=i(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;f=l((function(){function e(e){if(!c){if(c=!0,s=e,e=r(e),void 0!==o&&d.hasValue){var t=d.value;if(o(t,e))return i=t}return i=e}if(t=i,a(s,e))return t;var n=r(e);return void 0!==o&&o(t,n)?t:(s=e,i=n)}var s,i,c=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,o]);var p=s(e,f[0],f[1]);return c((function(){d.hasValue=!0,d.value=p}),[p]),u(p),p}},461:(e,t,n)=>{e.exports=n(956)},443:(e,t,n)=>{e.exports=n(39)},212:(e,t,n)=>{n.d(t,{e3:()=>l});var r=n(43),o=n(788),a=n(443),s=n(461);function i(e,t){const n=o.is.unit(e);let a={};n?a={unit:e}:"@@unitShape"in e?"function"==typeof e["@@unitShape"]?a=e["@@unitShape"]():u("expect @@unitShape to be a function"):a=e;const s=Array.isArray(a),i=r.useRef({stale:1,justSubscribed:0,scope:t}),[c,l,d,m,h]=r.useMemo((()=>{i.current.stale=1;const e=Array.isArray(a)?[]:{},r=[],s=[],c=[],l=[];for(const i in a){if(!{}.hasOwnProperty.call(a,i))continue;const f=a[i];o.is.unit(f)||u("expect useUnit ".concat(n?"argument":'value in key "'.concat(i,'"')," to be a unit")),o.is.event(f)||o.is.effect(f)?(e[i]=t?(0,o.GY)(f,{scope:t}):f,c.push(i),l.push(f)):(e[i]=null,r.push(i),s.push(f))}return[e,r,s,c,l]}),[i,t,...Object.keys(a),...Object.values(a)]),g=r.useRef({value:c,storeKeys:l,eventKeys:m,eventValues:h}),v=r.useCallback((e=>{const n=i.current;return n.justSubscribed=1,(0,o.AX)({unit:d,fn:()=>{n.stale||(n.stale=1,e())},scope:t,batch:1})}),[d,t,g,i]),y=r.useCallback((()=>{const e=g.current,r=i.current;let o,a=0;const u=e.value,f=e.storeKeys,v=e.eventKeys,y=e.eventValues,b=t!==r.scope;if(r.stale||r.justSubscribed||b){a=!r.justSubscribed||b,o=s?[...c]:{...c},f.length===l.length&&v.length===m.length||(a=1);for(let e=0;e<l.length;e++){const n=p(d[e],t),r=l[e];a||(a=f.includes(r)?u[r]!==n:1),o[r]=n}for(let e=0;e<m.length;e++){const t=h[e],n=m[e];a||(a=v.includes(n)?y[v.indexOf(n)]!==t:1)}}return a&&(e.value=o),e.storeKeys=l,e.eventKeys=m,e.eventValues=h,r.stale=0,r.justSubscribed=!a,r.scope=t,n?e.value.unit:e.value}),[v,d,h,t,g,i]);return f(v,y,y)}function c(e){const t=r.useContext(m);return e&&!t&&u("No scope found, consider adding <Provider> to app root"),t}function l(e,t){return i(e,c(null==t?void 0:t.forceScope))}const u=e=>{throw Error(e)},{useSyncExternalStore:f}=("undefined"!=typeof window?r.useLayoutEffect:r.useEffect,s),{useSyncExternalStoreWithSelector:d}=a,p=(e,t)=>t?t.getState(e):e.getState(),m=r.createContext(null),{Provider:h}=m},788:(e,t,n)=>{function r(e,t){for(const n in e)t(e[n],n)}function o(e,t){e.forEach(t)}function a(e,t,n){if(!e)throw Error("".concat(n?n+": ":"").concat(t))}function s(){let{node:e=[],from:t,source:n,parent:r=t||n,to:a,target:s,child:i=a||s,scope:c={},meta:l={},family:u={type:"regular"},regional:f}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d=ie(r),p=ie(u.links),m=ie(u.owners),h=[];o(e,(e=>e&&Y(h,e)));const g={id:Z(),seq:h,next:ie(i),meta:l,scope:c,family:{type:u.type||"crosslink",links:p,owners:m}};return o(p,(e=>Y(C(e),g))),o(m,(e=>Y(M(e),g))),o(d,(e=>Y(e.next,g))),f&&ne&&se(z(ne),[g]),g}function i(e,t,n){let r,a=We,s=null,i=_e;if(e.target&&(t=e.params,n=e.defer,r=e.meta,a="page"in e?e.page:a,e.stack&&(s=e.stack),i=q(e)||i,e=e.target),i&&_e&&i!==_e&&(_e=null),Array.isArray(e))for(let o=0;o<e.length;o++)Ie("pure",a,N(e[o]),s,t[o],i,r);else Ie("pure",a,N(e),s,t,i,r);if(n&&!Ke)return;const c={isRoot:Ke,currentPage:We,scope:_e,isWatch:Le,isPure:Te};let l,u,f,d,p,m;Ke=0;e:for(;d=qe();){const{idx:e,stack:t,type:n}=d;f=t.node,We=p=t.page,_e=q(t),p?m=p.reg:_e&&(m=_e.reg);const r=!!p,a=!!_e,s={fail:0,scope:f.scope};l=u=0;for(let o=e;o<f.seq.length&&!l;o++){const i=f.seq[o];if(i.order){const{priority:r,barrierID:a}=i.order,s=a?p?"".concat(p.fullID,"_").concat(a):a:0;if(o!==e||n!==r){a?Pe.has(s)||(Pe.add(s),Fe(o,t,r,a)):Fe(o,t,r,0);continue e}a&&Pe.delete(s)}switch(i.type){case"mov":{const e=i.data;let n;switch(e.from){case"stack":n=z(t);break;case"a":case"b":n=t[e.from];break;case"value":n=e.store;break;case"store":if(m&&!m[e.store.id])if(r){const n=Ge(p,e.store.id);t.page=p=n,n?m=n.reg:a?($e(_e,e.store,0,1,e.softRead),m=_e.reg):m=void 0}else a&&$e(_e,e.store,0,1,e.softRead);n=Ce(m&&m[e.store.id]||e.store)}switch(e.to){case"stack":t.value=n;break;case"a":case"b":t[e.to]=n;break;case"store":Ue(p,_e,e.target,0).current=n}break}case"compute":const e=i.data;if(e.fn){Le="watch"===f.meta.op,Te=e.pure;const n=e.safe?(0,e.fn)(z(t),s.scope,t):Je(s,e.fn,t);e.filter?u=!n:t.value=n,Le=c.isWatch,Te=c.isPure}}l=s.fail||u}if(Ye&&Ye(t,s),!l){const e=z(t),n=q(t);if(o(f.next,(r=>{Ie("child",p,r,t,e,n)})),n){f.meta.needFxCounter&&Ie("child",p,n.fxCount,t,e,n),f.meta.storeChange&&Ie("child",p,n.storeChange,t,e,n),f.meta.warnSerialize&&Ie("child",p,n.warnSerializeNode,t,e,n);const r=n.additionalLinks[f.id];r&&o(r,(r=>{Ie("child",p,r,t,e,n)}))}}}Ke=c.isRoot,We=c.currentPage,_e=q(c)}function c(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"combine")+"(",n="",o=0;return r(e,(e=>{o<25&&(null!=e&&(t+=n,t+=P(e)?D(e).fullName:e.toString()),o+=1,n=", ")})),t+")"}function l(e,t){let n,r;const o=e;if(t){const o=D(t);0===e.length?(n=o.path,r=o.fullName):(n=o.path.concat([e]),r=0===o.fullName.length?e:o.fullName+"/"+e)}else n=0===e.length?[]:[e],r=e;return{shortName:o,fullName:r,path:n}}function u(e,t){if(!t)return e;if(!t.name&&!t.named&&!t.loc)return e;let n="[".concat(e,"]");const r=t.named||t.name;r&&(n+=" unit '".concat(r,"'"));const o=t.loc;return!r&&o&&(n+=" (".concat(o.file,":").concat(o.line,":").concat(o.column,")")),n}function f(e,t){const n=t?e:e[0];fe(n);let r=n.or;const o=n.and;if(o){const n=t?o:o[0];if(ce(n)&&"and"in n){const n=f(o,t);e=n[0],r={...r,...n[1]}}else e=o}return[e,r]}function d(e){const t=()=>e();return t.unsubscribe=()=>e(),t}function p(e){const t=oe();if(t){const a=t.handlers[e];for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(a)return a(t,...r)}}function m(e,t){const n=Qe({or:t,and:"string"==typeof e?{name:e}:e}),r=u("event",n),o=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return a(!I(o,"derived"),"call of derived event is not supported, use createEvent instead",r),a(!Te,"unit call from pure function is not supported, use operators like sample instead",r),We?((e,t,n,r)=>{const o=We;let a=null;if(t)for(a=We;a&&a.template!==t;)a=V(a);Xe(a);const s=e.create(n,r);return Xe(o),s})(o,c,e,n):o.create(e,n)},c=oe(),l=Object.assign(o,{graphite:s({meta:it(n.actualOp||"event",o,n),regional:1}),create:e=>(i({target:o,params:e,scope:_e}),e),watch:e=>at(o,e),map:e=>ct(o,"map",e,[Ee()]),filter:e=>ct(o,"filter",e.fn?e:e.fn,[Ee(ve,1)]),filterMap:e=>ct(o,"filterMap",e,[Ee(),xe((e=>!ue(e)),1)]),prepend(e){a(o.targetable,".prepend of derived event is not supported, call source event instead",r);const t=m("* \u2192 "+o.shortName,{parent:V(o)});return p("eventPrepend",N(t)),ot(t,o,[Ee()],"prepend",e),st(o,t),t}});return null!=n&&n.domain&&n.domain.hooks.event(l),F(l,"id",l.graphite.id),re(l.graphite),l}function h(e,t,n,r,s){return pe(n,"".concat(s," ").concat(t),"first argument"),a(le(r),"second argument should be a function",s),H(!I(e,"derived"),"".concat(t," in derived store"),"".concat(t," in store created via createStore"),s),o(Array.isArray(n)?n:[n],(t=>{e.off(t),O(e).set(t,rt(ut(t,e,"on",ge,r)))})),e}function g(e,t){const n=Qe(t),r=Ne(e),c=u("store",n),l=m({named:"updates",derived:1});p("storeBase",r);const f=r.id,d="skipVoid"in n,v=d&&!n.skipVoid;H(!(d&&n.skipVoid),"{skipVoid: true}","updateFilter",c);const y={subscribers:new Map,updates:l,defaultState:e,stateRef:r,getState(){let e,t=r;if(We){let t=We;for(;t&&!t.reg[f];)t=V(t);t&&(e=t)}return!e&&_e&&($e(_e,r,1),e=_e),e&&(t=e.reg[f]),Ce(t)},setState:e=>i({target:y,params:e,defer:1,scope:_e}),reset:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a(y.targetable,".reset of derived store is not supported",c),o(t,(e=>h(y,".reset",e,(()=>y.defaultState),c))),y},on:(e,t)=>(a(y.targetable,".on of derived store is not supported",c),h(y,".on",e,t,c)),off(e){const t=O(y).get(e);return t&&(t(),O(y).delete(e)),y},map(e,t){let n,o;ce(e)&&(n=e,e=e.fn);const a=y.getState(),s=ue(a);oe()?o=null:(!s||s&&v)&&(o=e(a));const i=g(o,{name:"".concat(y.shortName," \u2192 *"),derived:1,...t,and:n}),c=ut(y,i,"map",ve,e);return Me(R(i),{type:"map",fn:e,from:r}),R(i).noInit=1,p("storeMap",r,c),i},watch(e,t){if(H(!t,"watch second argument","sample",c),!t||!P(e)){const t=at(y,e);return p("storeWatch",r,e)||e(y.getState()),t}return a(le(t),"second argument should be a function",c),e.watch((e=>t(y.getState(),e)))}},b=it("store",y,n),k=y.defaultConfig.updateFilter;y.graphite=s({scope:{state:r,fn:k},node:[xe(((e,t,n)=>(n.scope&&!n.scope.reg[r.id]&&(n.b=1),e))),Ae(r),xe(((e,t,n)=>{let{a:r,b:o}=n;const a=ue(e);return a&&!d&&console.error("".concat(c,": ").concat(lt)),(a&&v||!a)&&(e!==r||o)}),1),k&&Ee(he,1),ke({from:"stack",target:r})],child:l,meta:{...b,defaultState:e},regional:1}),F(y,"id",y.graphite.id),F(y,"rootStateRefId",f);const S=I(y,"serialize"),w=I(y,"derived"),x="ignore"===S,A=I(y,"sid");A&&(F(y,"storeChange",1),r.sid=A),A||x||w||F(y,"warnSerialize",1);const E=ue(e);return a(w||!E||E&&v,lt,c),w&&E&&!d&&console.error("".concat(c,": ").concat(lt)),se(y,[l]),null!=n&&n.domain&&n.domain.hooks.store(y),w||(y.reinit=m({named:"reinit"}),y.reset(y.reinit)),r.meta=y.graphite.meta,re(y.graphite),y}function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,o,s;[t,s]=f(t);const i=u("combine",s),c=t[t.length-1],l=t.length>1&&!K(c)&&ce(c),d=l&&c,p=l?t[t.length-2]:c;let m,h,g;if(le(p)?(o=t.slice(0,l?-2:-1),r=p):o=t,1===o.length){const e=o[0];K(e)||(m=e,h=1)}if(!h&&(m=o,r)){g=1;const e=r;r=t=>e(...t)}return a(ce(m),"".concat(i,": shape should be an object")),ft(Array.isArray(m),!g,m,s,r,d)}function y(){const e={};return e.req=new Promise(((t,n)=>{e.rs=t,e.rj=n})),e.req.catch((()=>{})),e}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Qe(le(e)?{handler:e}:e,t),r=u("effect",n),o=m(le(e)?{handler:e}:e,{...t,actualOp:"effect"}),c=N(o);F(c,"op",o.kind="effect"),o.use=e=>(a(le(e),".use argument should be a function",r),v.scope.handler=e,o),o.use.getCurrent=()=>v.scope.handler;const l=o.finally=m({named:"finally",derived:1}),f=o.done=l.filterMap({named:"done",fn(e){let{status:t,params:n,result:r}=e;if("done"===t)return{params:n,result:r}}}),d=o.fail=l.filterMap({named:"fail",fn(e){let{status:t,params:n,error:r}=e;if("fail"===t)return{params:n,error:r}}}),p=o.doneData=f.map({named:"doneData",fn:e=>{let{result:t}=e;return t}}),h=o.failData=d.map({named:"failData",fn:e=>{let{error:t}=e;return t}}),v=s({scope:{handler:o.defaultConfig.handler||(()=>a(0,"no handler used in ".concat(o.compositeName.fullName)))},node:[xe(((e,t,n)=>{let r=t.handler;const a=q(n);if(a){const e=a.handlers.unitMap.get(o)||a.handlers.sidMap[o.sid];e&&(r=e)}return e.handler=r,e}),0,1),xe(((e,t,n)=>{if(t.runnerFn&&!t.runnerFn(e,null,n))return;const{params:r,req:o,handler:a,args:s=[r]}=e,i=pt(r,o,1,l,n),c=pt(r,o,0,l,n),[u,f]=dt(a,c,s);u&&(ce(f)&&le(f.then)?f.then(i,c):i(f))}),0,1)],meta:{op:"fx",fx:"runner"}});c.scope.runner=v,Y(c.seq,xe(((e,t,n)=>{let{runner:r}=t;const o=V(n)?{params:e,req:{rs(e){},rj(e){}}}:e;return n.meta||(n.meta={fxID:ee()}),i({target:r,params:o,defer:1,scope:q(n),meta:n.meta}),o.params}))),o.create=e=>{const t=y(),n={params:e,req:t};if(_e&&!Le){const e=_e;t.req.finally((()=>{Be(e)})).catch((()=>{}))}return i({target:o,params:n,scope:_e}),t.req};const b=o.inFlight=g(0,{serialize:"ignore",named:(I(o,"name")||o.graphite.id)+".inFlight"}).on(o,(e=>e+1)).on(l,(e=>e-1)).map({fn:e=>e,named:"inFlight"});F(l,"needFxCounter","dec"),F(o,"needFxCounter",1);const k=o.pending=b.map({fn:e=>e>0,named:"pending"});return se(o,[l,f,d,p,h,k,b]),null!=n&&n.domain&&n.domain.hooks.effect(o),o}function k(e,t){const n=u("merge",t);pe(e,n,"first argument");const r=m({name:c(e,"merge"),derived:1,and:t});return ot(e,r,[],"merge"),r}function S(e,t){let n=0;return o(ht,(r=>{r in e&&(a(null!=e[r],gt(t,r)),n=1)})),n}function w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,o,a,s,[[i,c,l],d]=f(t),p=1;const m=u("sample",d);return ue(c)&&ce(i)&&S(i,m)&&(c=i.clock,l=i.fn,"batch"in i?p=i.batch:(H(!("greedy"in i),"greedy in sample","batch",m),p=!i.greedy),s=i.filter,r=i.target,o=i.name,a=i.sid,i=i.source),vt("sample",c,i,s,r,l,o,d,p,1,0,a)}function x(e){let{scope:t,safe:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(t||_e||n,"scopeBind: scope not found");const r=t||_e;return t=>{function n(){Be(s)}let o,a=0;const s=_e;Be(r);try{o=e(t)}catch(e){o=e,a=1}if(n(),a)throw o;return o instanceof Promise&&o.then(n,n),o}}function A(e){let{unit:t,fn:n,scope:r,batch:o}=e;const a=[je.run({fn:e=>n(e)})];o&&a.unshift(je.compute({priority:"sampler",batch:1})),K(t)&&a.unshift(je.mov({store:t.stateRef,to:"stack"}));const i=Array.isArray(t)?t:[t];if(r){const e=[],t=r.additionalLinks;return i.forEach((n=>{const r=t[n.graphite.id]||[];t[n.graphite.id]=r;const o=s({node:E(a,n),meta:{watchOp:n.kind}});r.push(o),e.push((()=>{const e=r.indexOf(o);-1!==e&&r.splice(e,1),nt(o)}))})),d((()=>{e.forEach((e=>e()))}))}{const e=s({node:a,parent:i,family:{owners:i}});return d((()=>{nt(e)}))}}function E(e,t){return K(t)?[je.mov({store:t.stateRef,to:"stack"}),...e]:e}n.d(t,{AX:()=>A,EH:()=>b,GY:()=>x,XM:()=>w,is:()=>G,lh:()=>m,y$:()=>g});const j="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",N=e=>e.graphite||e,C=e=>e.family.owners,M=e=>e.family.links,R=e=>e.stateRef,z=e=>e.value,O=e=>e.subscribers,V=e=>e.parent,q=e=>e.scope,I=(e,t)=>N(e).meta[t],F=(e,t,n)=>N(e).meta[t]=n,D=e=>e.compositeName,P=e=>(le(e)||ce(e))&&"kind"in e,_=e=>t=>P(t)&&t.kind===e,K=_("store"),L=_("event"),T=_("effect"),W=e=>P(e)&&!!e.targetable,B=_("domain"),X=_("scope");var G={__proto__:null,unit:P,store:K,event:L,effect:T,targetable:W,domain:B,scope:X,attached:e=>T(e)&&1==I(e,"attached")};const U=(e,t)=>{const n=e.indexOf(t);-1!==n&&e.splice(n,1)},Y=(e,t)=>e.push(t),H=(e,t,n,r)=>!e&&console.error("".concat(r?r+": ":"").concat(t," is deprecated").concat(n?", use ".concat(n," instead"):"")),$=()=>{let e=0;return()=>""+ ++e},J=$(),Q=$(),Z=$(),ee=$();let te;let ne=null;const re=e=>{te&&te(e,ne)},oe=()=>ne&&ne.template,ae=e=>(e&&ne&&ne.sidRoot&&(e="".concat(ne.sidRoot,"|").concat(e)),e),se=(e,t)=>{const n=N(e);o(t,(e=>{const t=N(e);"domain"!==n.family.type&&(t.family.type="crosslink"),Y(C(t),n),Y(M(n),t)}))},ie=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(Array.isArray(e)?e:[e]).flat().map(N)},ce=e=>"object"==typeof e&&null!==e,le=e=>"function"==typeof e,ue=e=>void 0===e,fe=e=>a(ce(e)||le(e),"expect first argument be an object"),de=(e,t,n,r)=>a(!(!ce(e)&&!le(e)||!("family"in e)&&!("graphite"in e)),"".concat(t,": expect ").concat(n," to be a unit (store, event or effect)").concat(r)),pe=(e,t,n)=>{Array.isArray(e)?o(e,((e,r)=>de(e,t,"".concat(r," item of ").concat(n),""))):de(e,t,n," or array of units")},me=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"target";return o(ie(t),(t=>a(!I(t,"derived"),"".concat(e,': derived unit in "').concat(n,'" is not supported, use createStore/createEvent instead"'))))},he=(e,t,n)=>{let{fn:r}=t,{a:o}=n;return r(e,o)},ge=(e,t,n)=>{let{fn:r}=t,{a:o}=n;return r(o,e)},ve=(e,t)=>{let{fn:n}=t;return n(e)},ye=(e,t,n,r)=>{const o={id:Q(),type:e,data:t};return n&&(o.order={priority:n},r&&(o.order.barrierID=++be)),o};let be=0;const ke=e=>{let{from:t="store",store:n,target:r,to:o=(r?"store":"stack"),batch:a,priority:s}=e;return ye("mov",{from:t,store:n,to:o,target:r},s,a)},Se=e=>{let{fn:t,batch:n,priority:r,safe:o=0,filter:a=0,pure:s=0}=e;return ye("compute",{fn:t,safe:o,filter:a,pure:s},r,n)},we=e=>{let{fn:t}=e;return Se({fn:t,priority:"effect"})},xe=(e,t,n)=>Se({fn:e,safe:1,filter:t,priority:n&&"effect"}),Ae=(e,t,n)=>ke({store:e,to:t?"stack":"a",priority:n&&"sampler",batch:1}),Ee=function(){return Se({fn:arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,pure:1,filter:arguments.length>1?arguments[1]:void 0})},je={mov:ke,compute:Se,filter:e=>{let{fn:t,pure:n}=e;return Se({fn:t,filter:1,pure:n})},run:we},Ne=e=>({id:Q(),current:e,initial:e}),Ce=e=>{let{current:t}=e;return t},Me=(e,t)=>{e.before||(e.before=[]),Y(e.before,t)};let Re=null;const ze=(e,t)=>{if(!e)return t;if(!t)return e;let n;return(e.v.type===t.v.type&&e.v.id>t.v.id||De(e.v.type)>De(t.v.type))&&(n=e,e=t,t=n),n=ze(e.r,t),e.r=e.l,e.l=n,e},Oe=[];let Ve=0;for(;Ve<6;)Y(Oe,{first:null,last:null,size:0}),Ve+=1;const qe=()=>{for(let e=0;e<6;e++){const t=Oe[e];if(t.size>0){if(3===e||4===e){t.size-=1;const e=Re.v;return Re=ze(Re.l,Re.r),e}1===t.size&&(t.last=null);const n=t.first;return t.first=n.r,t.size-=1,n.v}}},Ie=(e,t,n,r,o,a,s)=>Fe(0,{a:null,b:null,node:n,parent:r,value:o,page:t,scope:a,meta:s},e,0),Fe=(e,t,n,r)=>{const o=De(n),a=Oe[o],s={v:{idx:e,stack:t,type:n,id:r},l:null,r:null};3===o||4===o?Re=ze(Re,s):(0===a.size?a.first=s:a.last.r=s,a.last=s),a.size+=1},De=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},Pe=new Set;let _e,Ke=1,Le=0,Te=0,We=null;const Be=e=>{_e=e},Xe=e=>{We=e},Ge=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=e.parent;if(e)return e}return null},Ue=(e,t,n,r)=>{const o=Ge(e,n.id);return o?o.reg[n.id]:t?($e(t,n,r),t.reg[n.id]):n};let Ye;const He=e=>e,$e=(e,t,n,r,a)=>{const s=e.reg;if(s[t.id])return;const i=t.sid,c={id:t.id,current:t.initial,meta:t.meta};if(c.id in e.values.idMap)c.current=e.values.idMap[c.id];else if(i&&i in e.values.sidMap&&!(i in e.sidIdMap)){var l;const n=null==t||null===(l=t.meta)||void 0===l?void 0:l.serialize;c.current=(e.fromSerialize&&"ignore"!==n&&(null==n?void 0:n.read)||He)(e.values.sidMap[i])}else if(t.before&&!a){let a=0;const i=n||!t.noInit||r;o(t.before,(t=>{switch(t.type){case"map":{const o=t.from;if((o||t.fn)&&(o&&$e(e,o,n,r),i)){const e=o&&s[o.id].current;c.current=t.fn?t.fn(e):e}break}case"field":$e(e,t.from,n,r),a||(a=1,c.current=Array.isArray(c.current)?[...c.current]:{...c.current}),i&&(c.current[t.field]=s[s[t.from.id].id].current)}}))}i&&(e.sidIdMap[i]=t.id),s[t.id]=c},Je=(e,t,n)=>{try{return t(z(n),e.scope,n)}catch(t){console.error(t),e.fail=1,e.failReason=t}},Qe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ce(e)&&(Qe(e.or,t),r(e,((e,n)=>{ue(e)||"or"===n||"and"===n||(t[n]=e)})),Qe(e.and,t)),t},Ze=(e,t)=>{U(e.next,t),U(C(e),t),U(M(e),t)},et=(e,t,n)=>{let r;e.next.length=0,e.seq.length=0,e.scope=null;let o=M(e);for(;r=o.pop();)Ze(r,e),(t||n&&"sample"!==e.meta.op||"crosslink"===r.family.type)&&et(r,t,"on"!==r.meta.op&&n);for(o=C(e);r=o.pop();)Ze(r,e),n&&"crosslink"===r.family.type&&et(r,t,"on"!==r.meta.op&&n)},tt=e=>e.clear(),nt=function(e){let{deep:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;if(e.ownerSet&&e.ownerSet.delete(e),K(e))tt(O(e));else if(B(e)){n=1;const t=e.history;tt(t.events),tt(t.effects),tt(t.stores),tt(t.domains)}et(N(e),!!t,n)},rt=e=>d((()=>nt(e))),ot=(e,t,n,r,o)=>s({node:n,parent:e,child:t,scope:{fn:o},meta:{op:r},family:{owners:[e,t],links:t},regional:1}),at=(e,t)=>(a(le(t),".watch argument should be a function"),rt(s({scope:{fn:t},node:[we({fn:ve})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),st=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"event";V(e)&&V(e).hooks[n](t)},it=(e,t,n)=>{const r=Qe(n),o="domain"===e,a=J(),{sid:s=null,named:i=null,domain:c=null,parent:u=c}=r,f=i||r.name||(o?"":a),d=l(f,u),p={op:t.kind=e,name:t.shortName=f,sid:t.sid=ae(s),named:i,unitId:t.id=a,serialize:r.serialize,derived:r.derived,config:r};if(t.targetable=!r.derived,t.parent=u,t.compositeName=d,t.defaultConfig=r,t.getType=()=>(H(0,"getType","compositeName.fullName"),d.fullName),!o){t.subscribe=e=>(fe(e),t.watch(le(e)?e:t=>e.next&&e.next(t))),t[j]=()=>t;const e=oe();e&&(p.nativeTemplate=e)}return p},ct=(e,t,n,r)=>{let o;ce(n)&&(o=n,n=n.fn);const a=m({name:"".concat(e.shortName," \u2192 *"),derived:1,and:o});return ot(e,a,r,t,n),a},lt="undefined is used to skip updates. To allow undefined as a value provide explicit { skipVoid: false } option",ut=(e,t,n,r,o)=>{const a=R(t),s=ke({store:a,to:"a",priority:"read"});"map"===n&&(s.data.softRead=1);const i=[s,Ee(r)];return p("storeOnMap",a,i,K(e)&&R(e)),ot(e,t,i,n,o)},ft=(e,t,n,o,s,i)=>{const l=u("combine",o),f=e?e=>[...e]:e=>({...e}),d=e?[]:{},m=f(d),h=Ne(m),v=Ne(1);h.type=e?"list":"shape",h.noInit=1,p("combineBase",h,v);const y=g(m,{name:c(n),derived:1,...i,and:o}),b=R(y);b.noInit=1,F(y,"isCombine",1);const k=Ae(h);k.order={priority:"barrier"};const S=ke({store:b,to:"b",priority:"read"});S.data.softRead=1;const w=[xe(((e,t,n)=>(n.scope&&!n.scope.reg[h.id]&&(n.c=1),e))),k,ke({store:v,to:"b"}),xe(((e,n,r)=>{let{key:o}=n;if(r.c||e!==r.a[o])return t&&r.b&&(r.a=f(r.a)),r.a[o]=e,1}),1),ke({from:"a",target:h}),ke({from:"value",store:0,target:v}),ke({from:"value",store:1,target:v,priority:"barrier",batch:1}),Ae(h,1,1),s&&Ee(),S];if(r(n,((e,t)=>{if(!K(e))return a(!P(e)&&!ue(e),"combine expects a store in a field ".concat(t),l),void(m[t]=d[t]=e);d[t]=e.defaultState,m[t]=e.getState();const n=ot(e,y,w,"combine",s);n.scope.key=t;const r=R(e);Me(h,{type:"field",field:t,from:r}),p("combineField",r,n)})),y.defaultShape=n,Me(b,{type:"map",from:h,fn:s}),!oe())if(s){const e=s(m);!ue(e)||i&&"skipVoid"in i||console.error("".concat(l,": ").concat(lt)),b.current=e,b.initial=e,y.defaultState=e}else y.defaultState=d;return y},dt=(e,t,n)=>{try{return[1,e(...n)]}catch(e){return t(e),[0,null]}},pt=(e,t,n,r,o)=>a=>{i({target:[r,mt],params:[n?{status:"done",params:e,result:a}:{status:"fail",params:e,error:a},{value:a,fn:n?t.rs:t.rj}],defer:1,page:o.page,scope:o.scope,meta:o.meta})},mt=s({node:[we({fn:e=>{let{fn:t,value:n}=e;return t(n)}})],meta:{op:"fx",fx:"sidechain"}}),ht=["source","clock","target"],gt=(e,t)=>e+": ".concat(t," should be defined"),vt=(e,t,n,r,o,s,i,c,l,f,d,h)=>{const y=u(e,c),b=!!o;a(!ue(n)||!ue(t),gt(y,"either source or clock"));let S=0;ue(n)?S=1:P(n)||(n=v(n)),ue(t)?t=n:(pe(t,y,"clock"),Array.isArray(t)&&(t=k(t))),S&&(n=t),c||i||(i=n.shortName);let w="none";(d||r)&&(P(r)?w="unit":(a(le(r),"`filter` should be function or unit"),w="fn")),o?(pe(o,y,"target"),me(y,o)):"none"===w&&f&&K(n)&&K(t)?o=g(s?s(Ce(R(n)),Ce(R(t))):Ce(R(n)),{name:i,sid:h,or:c}):(o=m({name:i,derived:1,or:c}),p("sampleTarget",N(o)));const x=Ne();let A=[];if("unit"===w){const[n,a,s]=bt(r,o,t,x,e);s||A.push(...yt(a)),A.push(...yt(n))}const E=[];if(S)l&&E.push(Ae(x,1,1));else{const[r,a,s]=bt(n,o,t,x,e);s||E.push(...yt(a)),E.push(Ae(r,1,l))}const j=ot(t,o,[p("sampleSourceLoader"),ke({from:"stack",target:x}),...E,...A,Ae(x),"fn"===w&&Ee(((e,t,n)=>{let{a:o}=n;return r(e,o)}),1),s&&Ee(he),p("sampleSourceUpward",b)],e,s);return se(n,[j]),Object.assign(j.meta,c,{joint:1}),o},yt=e=>[Ae(e),xe(((e,t,n)=>{let{a:r}=n;return r}),1)],bt=(e,t,n,r,o)=>{const a=K(e),i=a?R(e):Ne(),c=Ne(a);return a||s({parent:e,node:[ke({from:"stack",target:i}),ke({from:"value",store:1,target:c})],family:{owners:[e,t,n],links:t},meta:{op:o},regional:1}),p("sampleSource",c,i,r),[i,c,a]}}}]);
//# sourceMappingURL=212.ee2a4db7.chunk.js.map